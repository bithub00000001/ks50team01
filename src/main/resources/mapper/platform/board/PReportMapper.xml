<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ksmart.ks50team01.platform.board.mapper.PReportMapper">
	
	<resultMap id="reportResultMap" type="PReport">
		<id 	property="reportNum" 		column="PST_CMNT_REPT_NO" />
		<result property="reportId" 		column="REPORT_MBR_ID" />
		<result property="reportCateNum" 		column="REPT_CTGRY_NO" />
		<result property="postCmntNum" 		column="PST_PST_CMNT_NO" />
		<result property="reportContent" 	column="PST_CMNT_REPT_CN" />
		<result property="reportDate" 		column="PST_CMNT_REPT_YMD" />
		<result property="reportedId" 		column="REPORTED_MBR_ID" />
		<result property="approveId" 		column="APRV_PF_ID" />
		<result property="reportApprove" 	column="PST_CMNT_REPT_APRV" />
		<result property="approveDate" 		column="PST_CMNT_REPT_APRV_YMD" />
		
		
		<!-- 1:1 association -->
		<association property="reportCate" javaType="PReport">
			<id 		property="reportCateNum" 		column="REPT_CTGRY_NO"/>
			<result 	property="reportRegId" 		column="REG_PF_ID"/>
			<result 	property="reportCateType" 		column="REPT_CTGRY_TYPE"/>
			<result 	property="reportMdfId" 		column="MDFCN_PF_ID"/>
			<result 	property="reportAct" 			column="ACT_YN"/>
			<result 	property="reportRegDate" 		column="REG_YMD"/>
			<result 	property="reportMdfDate" 		column="MDFCN_YMD"/>
		</association>
		
	
	</resultMap>
	
	

	<select id="getReportList" resultMap="reportResultMap">
	 	/* 신고내역 조회 */			
		SELECT 
			H.PST_CMNT_REPT_NO,
			H.REPORT_MBR_ID,
			C.REPT_CTGRY_TYPE,
			H.PST_PST_CMNT_NO,
			H.PST_CMNT_REPT_CN,
			H.PST_CMNT_REPT_YMD,
			H.REPORTED_MBR_ID,
			H.APRV_PF_ID,
			H.PST_CMNT_REPT_APRV,
			H.PST_CMNT_REPT_APRV_YMD
		FROM 
			REPORT_HISTORY AS H
			INNER JOIN
			REPORT_CATEGORY AS C
			ON
			H.REPT_CTGRY_NO = C.REPT_CTGRY_NO;
	</select>

	
</mapper>