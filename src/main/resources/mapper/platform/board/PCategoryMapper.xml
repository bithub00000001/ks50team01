<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ksmart.ks50team01.platform.board.mapper.PCategoryMapper">
	
	<resultMap id="faqCategoryResultMap" type="PCategory">
		<id 		property="faqCateNum" 		column="FAQ_CTGRY_NO"/>
		<result 	property="faqRegId" 		column="REG_PF_ID"/>
		<result 	property="faqCateType" 		column="FAQ_CTGRY_TYPE"/>
		<result 	property="faqMdfId" 		column="MDFCN_PF_ID"/>
		<result 	property="faqAct" 			column="ACT_YN"/>
		<result 	property="faqRegDate" 		column="REG_YMD"/>
		<result 	property="faqMdfDate" 		column="MDFCN_YMD"/>
	</resultMap>
	
	<resultMap id="noticeCategoryResultMap" type="PCategory">
		<id 		property="noticeCateNum" 		column="NTC_CTGRY_NO"/>
		<result 	property="noticeRegId" 		column="REG_PF_ID"/>
		<result 	property="noticeCateType" 		column="NTC_CTGRY_TYPE"/>
		<result 	property="noticeMdfId" 		column="MDFCN_PF_ID"/>
		<result 	property="noticeActiveYN" 			column="ACT_YN"/>
		<result 	property="noticeRegDate" 		column="REG_YMD"/>
		<result 	property="noticeModDate" 		column="MDFCN_YMD"/>
	</resultMap>
	
	

    <!-- 게시판 종류에 해당하는 카테고리 조회 --> 
    <select id="getCategoryListByBoardType" resultMap="faqCategoryResultMap">
   
        SELECT
        	FAQ_CTGRY_NO, 
        	REG_PF_ID, 
        	FAQ_CTGRY_TYPE, 
        	MDFCN_PF_ID, 
        	ACT_YN, 
        	REG_YMD, 
        	MDFCN_YMD
        FROM 
        	FAQ_CATEGORY
        WHERE
        	FAQ_CTGRY_NO = #{boardType} 
    </select>
    
    <select id="getNoticeCategoryList" resultMap="noticeCategoryResultMap">
     /* 공지사항 카테로리 조회*/
    	SELECT 
	    	NTC_CTGRY_NO, 
	    	REG_PF_ID, 
	    	NTC_CTGRY_TYPE, 
	    	MDFCN_PF_ID, 
	    	ACT_YN, 
	    	REG_YMD, 
	    	MDFCN_YMD
		FROM 
			NOTICE_CATEGORY
    </select>
    


	<select id="getFaqCategoryList" resultMap="faqCategoryResultMap">
	 	/* faq 카테고리 조회 */
		SELECT 
			FAQ_CTGRY_NO, 
			REG_PF_ID, 
			FAQ_CTGRY_TYPE, 
			MDFCN_PF_ID, 
			ACT_YN, 
			REG_YMD, 
			MDFCN_YMD
		FROM 
			FAQ_CATEGORY
	</select>


    <update id="updateFaqCategory" parameterType="PCategory">
        /* 카테고리 업데이트 */
        UPDATE FAQ_CATEGORY
        SET
            F.FAQ_CTGRY_NO = #{faqCateNum},
            F.FAQ_TTL = #{faqTitle},
            F.FAQ_CN = #{faqContent},
            F.ACT_YN = #{faqAct},
            F.MDFCN_YMD = NOW()
        WHERE
            F.FAQ_NO = #{faqNum};
    </update>

    <delete id="delFaqCategory" parameterType="map">
        /* 카테고리 삭제 */
        DELETE 
        FROM 
            FAQ_CATEGORY
        WHERE 
            F.FAQ_NO = #{faqNum};
    </delete>
	
</mapper>