<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
     			xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      			layout:decorate="~{/platform/layout/default}">

	<head>
		<!-- Datatables -->
	    <link th:href="@{/platform/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css}" rel="stylesheet">
	    <link th:href="@{/platform/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css}" rel="stylesheet">
	    <link th:href="@{/platform/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css}" rel="stylesheet">
	    <link th:href="@{/platform/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css}" rel="stylesheet">
	    <link th:href="@{/platform/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css}" rel="stylesheet">
	
		<style type="text/css">
			.control-label{
				text-align: center !important;
				background-color: #f8f8f8 !important;
				padding-bottom: 8px !important;	
			}
		</style>

	</head>

	<th:block layout:fragment="customContent">
		<!-- search start -->
		<div class="row">
			<div class="col-md-12 col-sm-12 col-xs-12">
				<div class="x_panel">
					<div class="x_title">
						<h2>
							검색 <small>search form</small>
						</h2>
						<ul class="nav navbar-right panel_toolbox">
							<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
							</li>
							<li class="dropdown"><a href="#" class="dropdown-toggle"
								data-toggle="dropdown" role="button" aria-expanded="false"><i
									class="fa fa-wrench"></i></a>
								<ul class="dropdown-menu" role="menu">
									<li><a href="#">Settings 1</a></li>
									<li><a href="#">Settings 2</a></li>
								</ul></li>
							<li><a class="close-link"><i class="fa fa-close"></i></a></li>
						</ul>
						<div class="clearfix"></div>
					</div>
					<div class="x_content">
						<br />
						<form id="demo-form2" class="form-horizontal form-label-left">
							<div class="form-group">
								<div class="col-md-2 col-sm-2 col-xs-0"></div>
								<label class="control-label col-md-1 col-sm-1 col-xs-12"
									for="first-name">제목</label>
								<div class="col-md-3 col-sm-3 col-xs-12 form-element">
									<input type="text" id="first-name"
										class="form-control col-md-4 col-xs-12">
								</div>
								<label class="control-label col-md-1 col-sm-1 col-xs-12"
									for="middle-name">작성자</label>
								<div class="col-md-3 col-sm-3 col-xs-12 form-element">
									<input id="middle-name" class="form-control col-md-7 col-xs-12"
										type="text" name="middle-name">
								</div>
								<div class="col-md-2 col-sm-2 col-xs-0"></div>
							</div>
							<div class="form-group">
								<div class="col-md-2 col-sm-2 col-xs-0"></div>
								<label class="control-label col-md-2 col-sm-2 col-xs-12">1:1문의 유형</label>
								<div class="col-md-6 col-sm-6 col-xs-12">
									<select class="form-control text-center">
										<option>계정 관리</option>
										<option>이용 문의</option>
										<option>건의 / 제안</option>
										<option>결제 / 환불</option>
									</select>
								</div>
								<div class="col-md-2 col-sm-2 col-xs-0"></div>
							</div>
							<div class="form-group">
								<div class="col-md-2 col-sm-2 col-xs-0"></div>
								<label class="control-label col-md-2 col-sm-2 col-xs-12">정렬 기준</label>
								<div class="col-md-6 col-sm-6 col-xs-12">
									<div class="radio">
										<label class="align-item-center"><input type="radio"
											value="option1" id="optionsRadios1" name="optionsRadios"
											checked="checked">최신순</label> <label><input
											type="radio" value="option2" id="optionsRadios2"
											name="optionsRadios">??순</label>
									</div>
								</div>
								<div class="col-md-2 col-sm-2 col-xs-0"></div>
							</div>
							<div class="ln_solid"></div>
							<div class="form-group">
								<div class="col-md-12 col-sm-12 col-xs-12 text-center">
									<button class="btn btn-success btn-lg" type="button">검색</button>
									<button type="reset" class="btn btn-dark btn-lg">초기화</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
		<!-- search end -->
		
		<!-- grid table start -->
		<div class="row">
			<div class="col-md-12 col-sm-12 col-xs-12">
				<div class="x_panel">
					<div class="x_content">
						<table id="datatable-responsive"
							class="table table-striped table-bordered dt-responsive nowrap"
							cellspacing="0" width="100%">
							<thead>
								<tr>
									<th><input type="checkbox" id="checkAll" name="checkAll"></th>
									<th>번호</th>
									<th>작성자</th>
									<th>카테고리</th>
									<th>진행상황</th>
									<th>제목</th>
									<th>내용</th>
									<th>등록일</th>
									<th>수정일</th>
									<th>취소일</th>
									<th>답변자</th>
									<th>답변내용</th>
									<th>답변일</th>
								</tr>
							</thead>
							<tbody>
								<tr th:unless="${qnaList != null}">
									<td colspan="11" class="text-center">등록된 1:1문의가 없습니다.</td>
								</tr>
								<tr th:if="${qnaList != null}" th:each="l : ${qnaList}">
									<td><input type="checkbox" id="checkbox_${l.qnaNum}"
										name="qnaNum" th:value="${l.qnaNum}"></td>
									<td th:text="${l.qnaNum}"></td>
									<td th:text="${l.qnaRegId}"></td>
									<td th:text="${l.category.qnaCategoryName}"></td>
									<td th:text="${l.qnaProCate}"></td>
									<td th:text="${l.qnaTitle}"></td>
									<td th:text="${l.qnaContent}"></td>
									<td th:text="${l.qnaRegDate}"></td>
									<td th:text="${l.qnaMdfDate}"></td>
									<td th:text="${l.qnartnDate}"></td>
									<td th:text="${l.ansRegId}"></td>
									<td th:each="answer : ${l.answerList}" th:text="${answer.ansContent}"></td>
									<td th:each="answer : ${l.answerList}" th:text="${answer.ansRegDate}"></td>
                                	<td>
	                                    <!-- 버튼 클릭 시 모달 창 열기 -->
	                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#answerModal"
	                                            th:data-qna-num="${l.qnaNum}"
	                                            th:data-qna-title="${l.qnaTitle}"
	                                            th:data-qna-content="${l.qnaContent}">
	                                        답변 입력
	                                    </button>
                                	</td>
                            	</tr>
                        	</tbody>
                   	 </table>

						<!-- Modal -->
						<div class="modal fade" id="answerModal" tabindex="-1"
							role="dialog" aria-labelledby="answerModalLabel"
							aria-hidden="true">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="answerModalLabel">문의 상세</h5>
										<button type="button" class="close" data-dismiss="modal"
											aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
                                    <!-- 문의 제목과 내용 표시 -->
                                    <div class="form-group">
                                        <label for="qnaTitle">문의 제목</label>
                                        <input type="text" class="form-control" id="qnaTitle" readonly>
                                    </div>
                                    <div class="form-group">
                                        <label for="qnaContent">문의 내용</label>
                                        <textarea class="form-control" id="qnaContent" rows="5" readonly></textarea>
                                    </div>
                                	<!-- 답변 내용 입력 -->
                                    <div class="form-group">
                                        <label for="answerContent">답변 내용</label>
                                        <textarea class="form-control" id="answerContent" rows="5"></textarea>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
                                    <button type="button" class="btn btn-primary" id="saveAnswer">답변 저장</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- 모달 끝 -->
                </div>
            </div>
        </div>
    </div>
    <!-- grid table end -->
		
	</th:block>
	<th:block layout:fragment="customJsFile">
		<!-- Datatables -->
	    <script th:src="@{/platform/vendors/datatables.net/js/jquery.dataTables.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-buttons/js/dataTables.buttons.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-buttons/js/buttons.flash.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-buttons/js/buttons.html5.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-buttons/js/buttons.print.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-responsive/js/dataTables.responsive.min.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js}"></script>
	    <script th:src="@{/platform/vendors/datatables.net-scroller/js/dataTables.scroller.min.js}"></script>
	    <script th:src="@{/platform/vendors/jszip/dist/jszip.min.js}"></script>
	    <script th:src="@{/platform/vendors/pdfmake/build/pdfmake.min.js}"></script>
	    <script th:src="@{/platform/vendors/pdfmake/build/vfs_fonts.js}"></script>
	</th:block>
	
		<!-- custom js file start -->
	<th:block layout:fragment="customJs">
	<script type="text/javascript" th:src="@{/platform/js/checkbox/categoryDel.js}"></script>
	
	<script>
	    document.getElementById('checkAll').addEventListener('change', function() {
	        var checkboxes = document.querySelectorAll('[id^=checkbox_]');
	        checkboxes.forEach(function(checkbox) {
	            checkbox.checked = document.getElementById('checkAll').checked;
	        });
	    });
	    

	    
	    
	</script>
	</th:block>
	<!-- custom js file end -->
	
	
</html>