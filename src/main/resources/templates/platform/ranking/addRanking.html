<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{platform/layout/default}">

<th:block layout:fragment="customCss">
    <!-- Datatables CSS START -->
    <link th:href="@{/platform/vendors/datatables.net-bs/css/dataTables.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/platform/vendors/datatables.net-buttons-bs/css/buttons.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/platform/vendors/datatables.net-fixedheader-bs/css/fixedHeader.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/platform/vendors/datatables.net-responsive-bs/css/responsive.bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/platform/vendors/datatables.net-scroller-bs/css/scroller.bootstrap.min.css}" rel="stylesheet">
    <!-- Datatables CSS END -->
</th:block>

	<th:block layout:fragment="customContent">
		
    <div class="x_content">
		<div class="clearfix"></div>
    </div>
            <div class="row">
                <div class="col-xs-12 table">
                 <h1 th:text="${title}"></h1>
                  <form th:action="@{/platform/ranking/addRanking}" method="post">   
                    <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap"  cellspacing="0" width="100%">
                        <tbody>
							<tr>
								<td><label for="pRankingNum">플랫폼제휴추천</label></td>
								<td><input type="text" id="pRankingNum" name="pRankingNum"
									placeholder="플랫폼리스틑 넘버를 입력해주세요" /></td>
								<td>
									<button type="button" id="idCheck">중복 넘버 체크</button>
								</td>
							</tr>
							<tr>
								<td><label for="pRankingRegId">등록플랫폼권한아이디</label></td>
								<td colspan="2"><input type="text" id="pRankingRegId"
									name="pRankingRegId" placeholder="ex: admin001" disabled="disabled">
								</td>
							</tr>
							<tr>
								<td><label for="partnerBusinessCode">제휴사업장코드</label></td>
								<td colspan="2"><input type="text" id="partnerBusinessCode"
									name="partnerBusinessCode" placeholder="제휴사업장코드를 입력해주세요" disabled="disabled" />
									<select>
										<option>숙소 hotel_000</option>
										<option>음식점 RSTRN_000</option>
										<option>관광지 tour_000</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>
									<label for="tripLctgryCode">여행지대분류코드</label>
								</td>
								<td colspan="2">
									<input type="text" id="tripLctgryCode" name="tripLctgryCode" placeholder="여행지대분류코드를 입력해주세요" disabled="disabled"/>
									<select>
										<option>관광지 TRIP_LCTGRY_01</option>
										<option>음식점 TRIP_LCTGRY_02</option>
										<option>숙소 TRIP_LCTGRY_03</option>
										<option>기타 TRIP_LCTGRY_04</option>
									</select>
								</td>
							</tr>
							<tr>
								<td>
									<label for="businessName">사업자상호</label>
								</td>
								<td colspan="2">
									<input type="text" id="businessName" name="businessName" placeholder="사업자상호를 입력해주세요" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="rgnSctgryName">지역소분류명</label>
								</td>
								<td colspan="2">
									<input type="text" id="rgnSctgryName" name="rgnSctgryName" placeholder="지역소분류명을 입력해주세요" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="partnerBrandName">제휴브랜드명</label>
								</td>
								<td colspan="2">
									<input type="text" id="partnerBrandName" name="partnerBrandName" placeholder="제휴브랜드명을 입력해주세요" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="artclRankigNum">항목순위</label>
								</td>
								<td colspan="2">
									<input type="text" id="artclRankigNum" name="artclRankigNum" placeholder="항목순위를 입력해주세요" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="partnerShipStart">제휴기간시작</label>
								</td>
								<td colspan="2">
									<input type="text" id="partnerShipStart" name="partnerShipStart" placeholder="ex: 0000-00-00" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="partnerShipStartEnd">제휴기간종료</label>
								</td>
								<td colspan="2">
									<input type="text" id="partnerShipStartEnd" name="partnerShipStartEnd" placeholder="ex: 0000-00-00" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="partnerType">제휴형태</label>
								</td>
								<td colspan="2">
									<input type="text" id="partnerType" name="partnerType" placeholder="제휴형태를 입력해주세요" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="partnerShipDetail">제휴내용</label>
								</td>
								<td colspan="2">
									<input type="text" id="partnerShipDetail" name="partnerShipDetail" placeholder="제휴내용을 입력해주세요" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="adStart">배너광고시작</label>
								</td>
								<td colspan="2">
									<input type="text" id="adStart" name="adStart" placeholder="ex: 0000-00-00" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="adEnd">배너광고종료</label>
								</td>
								<td colspan="2">
									<input type="text" id="adEnd" name="adEnd" placeholder="ex: 0000-00-00" disabled="disabled"/>
								</td>
							</tr>
							<tr>
								<td>
									<label for="activate">활성화</label>
								</td>
								<td colspan="2">
									<input type="text" id="activate" name="activate" placeholder="ex: Y or N" disabled="disabled"/>
								</td>
							</tr>
	
						</tbody>
						<tfoot>
							<tr>
								<td colspan="3">
									<button type="button" id="addMemberBtn" disabled="disabled">등록</button>
									<button type="reset" id="resetBtn" disabled="disabled">초기화</button>
								</td>
							</tr>
						</tfoot>	
						</table>
					</form>
				</div>
			</div>
	</th:block>
	
	</th:block>
<th:block layout:fragment="customJsFile">
    <!-- Datatables JS START -->
    <script th:src="@{/platform/vendors/datatables.net/js/jquery.dataTables.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-bs/js/dataTables.bootstrap.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-buttons/js/dataTables.buttons.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-buttons-bs/js/buttons.bootstrap.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-buttons/js/buttons.flash.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-buttons/js/buttons.html5.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-buttons/js/buttons.print.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-keytable/js/dataTables.keyTable.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-responsive/js/dataTables.responsive.min.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-responsive-bs/js/responsive.bootstrap.js}"></script>
    <script th:src="@{/platform/vendors/datatables.net-scroller/js/dataTables.scroller.min.js}"></script>
    <script th:src="@{/platform/vendors/jszip/dist/jszip.min.js}"></script>
    <script th:src="@{/platform/vendors/pdfmake/build/pdfmake.min.js}"></script>
    <script th:src="@{/platform/vendors/pdfmake/build/vfs_fonts.js}"></script>
    <!-- Datatables JS END -->
    
    <th:block layout:fragment="customJs">
		<script>		
			$('#idCheck').click(function(){
				const pRankingNum = $('#pRankingNum').val();
				//const $memberId = $('#memberId')[0];
				//console.log({$memberId});
				//console.log(typeof memberId);
				if(pRankingNum == ''){
					alert('플랫폼 넘버를 입력해주세요');
					$('#pRankingNum').focus();
					return ;
				}
				const request = $.ajax({
					method : 'POST',
					url : '/platform/ranking/rankingListCheck',
					data : { 'pRankingNum' : pRankingNum },
					dataType : 'json'
				});
				request.done(function(res){
					console.log(res);
					console.log(typeof res);
					const isPRankingNum = res;
					$('form input').not('#pRankingNum').prop('disabled', isPRankingNum);
					$('form select').prop('disabled', isPRankingNum);
					$('form button').not('#idCheck').prop('disabled', isPRankingNum);
					if(isPRankingNum){
						alert('등록 할 수 없는 넘버입니다.');
						$('form input').val('');
						$('form select').val('');
						$('#pRankingNum').focus();
					}
				});
				request.fail(function(jqXHR, textStatus, error){
					console.log(error);
				});
			});
			$('#pRankingNum').change(function(){
				$('form input').not('#pRankingNum').prop('disabled', true);
				$('form select').prop('disabled', true);
				$('form button').not('#idCheck').prop('disabled', true);
			});
						
			$('#addMemberBtn').click(function(){
				const pRankingNum = $('pRankingNum').val();
				const pRankingRegId = $('pRankingRegId').val();
				const partnerBusinessCode = $('partnerBusinessCode').val();
				const tripLctgryCode = $('tripLctgryCode').val();
				const businessName = $('businessName').val();
				const partnerBrandName = $('partnerBrandName').val();
				const artclRankigNum = $('artclRankigNum').val();
				const partnerShipStart = $('partnerShipStart').val();
				const partnerShipStartEnd = $('partnerShipStartEnd').val();
				const partnerType = $('partnerType').val();
				const partnerShipDetail = $('partnerShipDetail').val();
				const adStart = $('adStart').val();
				const adEnd = $('adEnd').val();
				const activate = $('activate').val();
				
				let isSubmit = true;
				$('form input, form select').each(function(idx, element){
					const id = element.id;
					const value = $(element).val();
					if(value == ''){
						const cate = $(`label[for="${id}"]`).text();
						alert(`${cate} 필수 입력항목입니다.`);
						$(element).focus();
						isSubmit = false;
						return false;
					}
				});
				
			/* if(!memberId){
				alert('아이디를 입력해주세요');
				return;
			} 
			if(!memberPw){
				alert('비밀번호를 입력해주세요');
				return;
			}
			if(!memberName){
				alert('이름를 입력해주세요');
				return;
			}
			if(!memberLevel){
				alert('권한을 선택해주세요');
				return;
			}
			if(!memberEmail){
				alert('이메일을 입력해주세요');
				return;
			}
			if(!memberAddr){
				alert('주소를 입력해주세요');
				return;
			} */
				if(isSubmit) $('form').submit();
			});
		</script>
</th:block>
</html>