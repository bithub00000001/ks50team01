<!DOCTYPE html>
<html lang="ko" layout:decorate="~{/user/layout/default}"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:th="http://www.thymeleaf.org">

<head>
<title>1:1문의 작성</title>
<th:block layout:fragment="customCss">
	<link th:href="@{/user/css/qnaWrite.css}" rel="stylesheet">
</th:block>
</head>

<th:block layout:fragment="customPageSection">
	<!-- Elements Forms -->
	<div class="row">
		<div class="col-12">
			<h3 class="element-title">1:1 문의</h3>
			<div class="mb-6">

				<form id="qnaForm" action="#" method="POST">
					<div class="form-group">
						<label for="exampleInputText">1:1 문의 유형</label>
						<div class="select-default">
							<select class="select-option">
								<option>계정 관리</option>
								<option>이용 문의</option>
								<option>건의 및 제안</option>
								<option>결제 및 환불</option>
							</select>
						</div>
					</div>

					<div class="form-group">
						<label for="inputText" class="col-sm-2 col-form-label">문의 제목</label>
						<input type="text" class="form-control" id="qnatitle" name="qnatitle" placeholder="제목">
					</div>

					<div class="form-group">
						<label for="exampleFormControlTextarea1">문의 내용</label>
						<textarea class="form-control" id="qnaContent" name="qnaContent" rows="6" placeholder="내용을 입력해주세요."></textarea>
					</div>

					<div class="pt-5 mb-5" id="modal">
						<div class="row">
							<div class="col-md-6 col-lg-4">
								<h3 class="element-title mb-5">첨부 파일</h3>
								<!-- Button trigger modal -->
								<button id="attachBtn" class="btn btn-primary file-upload-btn" type="button">+ 파일 첨부하기 (0/10)</button>
                                <input type="file" id="fileInput" style="display: none;"
                                        accept=".jpg, .jpeg, .gif, .png, .pdf" multiple>
                                    <div id="fileNames"></div>
							</div>
						</div>
					</div>

					<div class="d-flex justify-content-end" style="margin-bottom: 50px">
						<!-- 등록 버튼 -->
						<button type="submit" class="btn btn-primary mr-2">등록</button>
						<!-- 취소 버튼 -->
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
					</div>
				</form>
			</div>
		</div>
	</div>

</th:block>


<th:block layout:fragment="customJsFIle">
    <script>
		document.getElementById('attachBtn').addEventListener('click', function() {
        document.getElementById('fileInput').click();
    });

    document.getElementById('fileInput').addEventListener('change', function() {
        const files = this.files;
        const fileNamesContainer = document.getElementById('fileNames');
        fileNamesContainer.innerHTML = ''; // 이전 파일 이름을 지움

        if (files.length > 0) {
            for (let i = 0; i < files.length; i++) {
                const file = files[i]; // 파일을 가져옴
                const fileName = file.name;
                
                // 썸네일과 파일 이름을 감싸는 div 요소 생성
                const thumbnailContainer = document.createElement('div');
                thumbnailContainer.classList.add('thumbnail-container');

                // 썸네일 이미지 생성 및 추가
                const thumbnail = document.createElement('img');
                thumbnail.src = URL.createObjectURL(file);
                thumbnail.alt = file.name;
                thumbnail.classList.add('thumbnail');
                thumbnailContainer.appendChild(thumbnail);

                // 파일 이름 텍스트 생성 및 추가
                const fileNameText = document.createElement('div');
                fileNameText.textContent = fileName;
                thumbnailContainer.appendChild(fileNameText);

                // 삭제 버튼 추가
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'x';
                deleteButton.classList.add('delete-button');
                // 삭제 버튼에 클릭 이벤트 추가
                deleteButton.addEventListener('click', function() {
                    thumbnailContainer.remove(); // 썸네일과 파일 이름을 감싸는 요소 제거
                });
                thumbnailContainer.appendChild(deleteButton);

                // 썸네일과 파일 이름을 파일 이름 컨테이너에 추가
                fileNamesContainer.appendChild(thumbnailContainer);
            }
        }
    });
    </script>
</th:block>

</html>